# Лабораторная работа №5

## Задание

 + Настроить консул ( использовать уже готовую роль и инветори).
 + База данных должна быть проинициализирована на выделенных дисках (в Vargrantfile они уже подключены). БД должна находить в папке /pgsql/pg_data/14. WAL архивы должны находить в папке /pgsql/pg_wal/14. В эти папки должны быть примонтированы диски /dev/sdb и /dev/sdc соответственно. Диски должны быть подключены в LVM и отформатированы в файловой системе xfs.
 + На серверах pg1 и pg2 настроить оркестратор репликации Patroni (пакет в архиве).
 + С помощью утилиты vip-manager обеспечить настройку VIP адреса на мастер сервере. vip-manager. Напоминаю, что в конфиге vip-manager необходимо настроить подключение по DCS Consul. IP адрес подключения 127.0.0.1:8500. Так же нужно будет указать consul_token, переменную которого можно взять в роли consul.


## Чтобы всё заработало:

Сначала уничтожить все то, что было сделано:

````
vagrant destroy --force
````

Далее поднять vagrant:
````
vagrant up
````

Запустить playbook, который всё установит и запустит:

````
ansible-playbook playbook.yml
````